const pConf=sos.config.page;function checkPost(a={}){a&&"0.0"===a.status&&setTimeout(function(){removeAlert(),requery()},1800)}const appGoLive=(a,e=!0)=>{confirm("Do you want to set this app live?")&&($("#post-form input[name=name]").val(a),$("#post-form input[name=live]").val(1),$("#post-form").attr("action","/app/tymfrontiers-cdn/devman.soswapp/src/GoLive.php").submit())},doAppStatus=(a,e)=>{confirm(`Do you want to set app status to ${e}?`)&&($("#post-form input[name=name]").val(a),$("#post-form input[name=status]").val(e),$("#post-form").attr("action","/app/tymfrontiers-cdn/devman.soswapp/src/PatchApp.php").submit())},requery=()=>{$("#query-form").length>0&&$("#query-form").submit()};function listLog(a){let e="";$.each(a,function(a,t){e+="<tr>",e+=`<td> <i class="fas fa-info-circle"></i> <a href="#" onclick="sos.faderBox.url('/app/tymfrontiers-cdn/devman.soswapp/service/view-app.php',{name :'${t.app}'},{exitBtn : true});">${t.app_name} (${t.app})</a></td>`,e+=`<td><a href="#" onclick="sos.faderBox.url('/app/tymfrontiers-cdn/devman.soswapp/service/view-applog.php',{id :'${t.id}'},{exitBtn : true});"> <i class="fas fa-window-maximize"></i> ${t.path.replace("| "+t.app,"").replaceAll(t.app,"")}</a></td>`,e+=`<td title="${t.created_date}">${t.created}</td>`,e+="</tr>"}),$(`${pConf.datacontainer}`).html(e)}function listApp(a){let e="";$.each(a,function(a,t){e+="<tr>",e+=`<td> <span class="${"ACTIVE"===t.status?"color-green":"color-red"}">[${(!0===t.live?"LIVE | ":"")+t.status}]</span> <a href="#" onclick="sos.faderBox.url('/app/tymfrontiers-cdn/devman.soswapp/service/put-app.php', {name : '${t.name}',callback : 'requery'}, {exitBtn : true});" class='blue color-blue'><i class="fas fa-edit"></i> ${t.name}</a></td>`,e+=`<td><a href="#" class="color-blue blue" onclick="sos.faderBox.url('/app/tymfrontiers-cdn/devman.soswapp/service/view-app.php',{name :'${t.name}'},{exitBtn : true});"> <i class="fas fa-window-maximize"></i> ${t.title}</a></td>`,e+=`<td>${t.user_name} (${t.user})</td>`,e+=`<td>${t.requests}</td>`,e+="<td>";let s=[];t.live&&s.push(`<a class="blue" href="#" onclick="sos.faderBox.url('/app/tymfrontiers-cdn/devman.soswapp/service/generate-cred.php', {app : '${t.name}'}, {exitBtn : true});"><i class="fas fa-key"></i>&nbsp;Get&nbsp;credentials</a>`),t.live||in_array(t.status,["BANNED","PENDING","SUSPENDED"])||s.push(`<a class="green" href="#" onclick="appGoLive('${t.name}', true);"><i class="fas fa-bullseye"></i>&nbsp;Go live</a>`),in_array(t.status,["PENDING","SUSPENDED"])&&s.push(`<a class="blue color-blue" href="#" onclick="doAppStatus('${t.name}', 'ACTIVE');"> <i class="fas fa-check-circle"></i>&nbsp;Activate</a>`),in_array(t.status,["ACTIVE","PENDING"])&&(s.push(`<a class="asphalt color-asphalt" href="#" onclick="doAppStatus('${t.name}', 'SUSPENDED');"><i class="fas fa-hand-paper"></i>&nbsp;Suspend</a>`),s.push(`<a class="red color-red" href="#" onclick="doAppStatus('${t.name}', 'BANNED');"><i class="fas fa-ban"></i>&nbsp;Ban</a>`)),e+=s.join(" | "),e+="</td>",e+="</tr>"}),$(`${pConf.datacontainer}`).html(e)}const doFetch=a=>{a&&"0.0"==a.status&&object_length(a[pConf.datasearch])>0?($(".pages-text").text(a.pages),$(".pages-val").val(a.pages),sos.config.page.pages=a.pages,$(".records-text").text(a.records),$(".records-val").val(a.records),sos.config.page.records=a.records,$(".page-val").val(a.page),$(".page-text").text(a.page),sos.config.page.page=a.page,$(".limit-val").val(a.limit),$(".limit-text").text(a.limit),sos.config.page.limit=a.limit,a.has_next_page&&$("#next-page").data("page",a.next_page),sos.config.page.hasNextPage=a.has_next_page,a.has_previous_page&&$("#previous-page").data("page",a.previous_page),sos.config.page.hasPreviousPage=a.has_previous_page,"function"==typeof window[pConf.datahandle]&&window[pConf.datahandle](a[pConf.datasearch]),removeAlert(),pageNatr()):$(`${pConf.datacontainer}`).html(""),pageNatr()},pageNatr=()=>{let a=$(`${pConf.datapager}`);pConf.hasPreviousPage?($(document).find("button.prev-page-btn").remove(),a.append($(`<button class='sos-btn face-secondary prev-page-btn' onclick="pageTo(${pConf.page-1});"> <i class="fas fa-lg fa-angle-left"></i></button>`))):$(document).find("button.prev-page-btn").remove(),pConf.hasNextPage?($(document).find("button.next-page-btn").remove(),a.append($(`<button class='sos-btn face-secondary next-page-btn' onclick="pageTo(${pConf.page+1});"> <i class="fas fa-lg fa-angle-right"></i></button>`))):$(document).find("button.next-page-btn").remove()},pageTo=(a=0)=>{a>0&&($(".page-val").val(a),requery())};function doPost(a={}){(a&&"0.0"==a.status||a.errors.length<1)&&("callback"in param&&"function"==typeof window[param.callback]?(faderBox.close(),window[param.callback](data)):setTimeout(function(){faderBox.close(),removeAlert(),requery()},1500))}